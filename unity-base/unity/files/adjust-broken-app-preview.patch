From dae7816e6ce1a3f99b4f2de328ee4200da861626 Mon Sep 17 00:00:00 2001
From: c4pp4
Date: Wed, 17 Aug 2022 16:52:59 +0200
Subject: [PATCH 1/1] Adjust broken app preview (right click in the Dash)

Taken from https://gitlab.com/ubuntu-unity/unity/unity/-/commit/e7c90e4fad47878161fa9ba4a2aedacada624c1b#1ed5cd0ca0193cb91961b47adcd71e8f9a49c248

Signed-off-by: c4pp4
---
 dash/previews/ApplicationPreview.cpp | 50 +---------------------------
 1 file changed, 1 insertion(+), 49 deletions(-)

diff --git a/dash/previews/ApplicationPreview.cpp b/dash/previews/ApplicationPreview.cpp
index 19d5172..51baf5f 100644
--- a/dash/previews/ApplicationPreview.cpp
+++ b/dash/previews/ApplicationPreview.cpp
@@ -161,19 +161,6 @@ void ApplicationPreview::SetupViews()
         app_icon_->mouse_click.connect(on_mouse_down);
         icon_layout_->AddView(app_icon_.GetPointer(), 0);
 
-        if (app_preview_model->rating >= 0)
-        {
-          app_rating_ = new PreviewRatingsWidget();
-          AddChild(app_rating_.GetPointer());
-          app_rating_->scale = scale();
-          app_rating_->SetMaximumHeight(style.GetRatingWidgetHeight().CP(scale));
-          app_rating_->SetMinimumHeight(style.GetRatingWidgetHeight().CP(scale));
-          app_rating_->SetRating(app_preview_model->rating);
-          app_rating_->SetReviews(app_preview_model->num_ratings);
-          app_rating_->request_close().connect([this]() { preview_container_->request_close.emit(); });
-          icon_layout_->AddView(app_rating_.GetPointer(), 0);
-        }
-
         /////////////////////
 
         /////////////////////
@@ -192,6 +179,7 @@ void ApplicationPreview::SetupViews()
         title_->SetFont(style.title_font().c_str());
         title_->mouse_click.connect(on_mouse_down);
         title_subtitle_layout_->AddView(title_.GetPointer(), 1);
+        title_subtitle_layout_->SetPadding(34, 0, 0, 0);
 
         if (!preview_model_->subtitle.Get().empty())
         {
@@ -207,41 +195,6 @@ void ApplicationPreview::SetupViews()
         app_updated_copywrite_layout_ = new nux::VLayout();
         app_updated_copywrite_layout_->SetSpaceBetweenChildren(COPYRIGHT_SPACE_CHILDREN.CP(scale));
 
-        if (!app_preview_model->license.Get().empty())
-        {
-          license_ = new StaticCairoText(app_preview_model->license, true, NUX_TRACKER_LOCATION);
-          AddChild(license_.GetPointer());
-          license_->SetFont(style.app_license_font().c_str());
-          license_->SetLines(-1);
-          license_->SetScale(scale);
-          license_->mouse_click.connect(on_mouse_down);
-          app_updated_copywrite_layout_->AddView(license_.GetPointer(), 1);
-        }
-
-        if (!app_preview_model->last_update.Get().empty())
-        {
-          std::stringstream last_update;
-          last_update << _("Last Updated") << " " << app_preview_model->last_update.Get();
-
-          last_update_ = new StaticCairoText(last_update.str(), true, NUX_TRACKER_LOCATION);
-          AddChild(last_update_.GetPointer());
-          last_update_->SetFont(style.app_last_update_font().c_str());
-          last_update_->SetScale(scale);
-          last_update_->mouse_click.connect(on_mouse_down);
-          app_updated_copywrite_layout_->AddView(last_update_.GetPointer(), 1);
-        }
-
-        if (!app_preview_model->copyright.Get().empty())
-        {
-          copywrite_ = new StaticCairoText(app_preview_model->copyright, true, NUX_TRACKER_LOCATION);
-          AddChild(copywrite_.GetPointer());
-          copywrite_->SetFont(style.app_copywrite_font().c_str());
-          copywrite_->SetLines(-1);
-          copywrite_->SetScale(scale);
-          copywrite_->mouse_click.connect(on_mouse_down);
-          app_updated_copywrite_layout_->AddView(copywrite_.GetPointer(), 1);
-        }
-
         app_data_layout_->AddLayout(title_subtitle_layout_);
         app_data_layout_->AddLayout(app_updated_copywrite_layout_);
 
@@ -297,7 +250,6 @@ void ApplicationPreview::SetupViews()
     full_data_layout_->AddLayout(actions_layout_, 0);
     /////////////////////
 
-  image_data_layout_->AddView(image_.GetPointer(), 0);
   image_data_layout_->AddLayout(full_data_layout_, 1);
 
   mouse_click.connect(on_mouse_down);
-- 
2.35.1

